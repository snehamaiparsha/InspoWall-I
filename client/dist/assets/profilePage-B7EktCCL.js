import{j as e,L as u,I as i,b as l,d as m,r as p,e as f}from"./index-DqcJGOsq.js";import{G as h}from"./gallery--z42ux_f.js";import{a as c,u as x}from"./useMutation-Bp5n_cWk.js";import{f as g}from"./index-BojVbZw0.js";import"./useBaseQuery-zgPbw50b.js";const j=({userId:a})=>{const{isPending:o,error:t,data:n}=c({queryKey:["boards",a],queryFn:()=>l.get(`/boards/${a}`).then(s=>s.data)});return o?"Loading...":t?"An error has occurred: "+t.message:(console.log(n),e.jsx("div",{className:"collections",children:n==null?void 0:n.map(s=>e.jsxs(u,{to:`/search?boardId=${s._id}`,className:"collection",children:[e.jsx(i,{path:s.firstPin.media,alt:""}),e.jsxs("div",{className:"collectionInfo",children:[e.jsx("h1",{children:s.title}),e.jsxs("span",{children:[s.pinCount," Pins · ",g(s.createdAt)]})]})]},s._id))}))},v=async a=>(await l.post(`/users/follow/${a}`)).data,y=({isFollowing:a,username:o})=>{const t=m(),n=x({mutationFn:v,onSuccess:()=>{t.invalidateQueries({queryKey:["profile",o]})}});return e.jsx("button",{onClick:()=>n.mutate(o),disabled:n.isPending,children:a?"Unfollow":"Follow"})},F=()=>{const[a,o]=p.useState("saved"),{username:t}=f(),{isPending:n,error:s,data:r}=c({queryKey:["profile",t],queryFn:()=>l.get(`/users/${t}`).then(d=>d.data)});return n?"Loading...":s?"An error has occurred: "+s.message:r?e.jsxs("div",{className:"profilePage",children:[e.jsx(i,{className:"profileImg",w:100,h:100,path:r.img||"/general/noAvatar.png",alt:""}),e.jsx("h1",{className:"profileName",children:r.displayName}),e.jsxs("span",{className:"profileUsername",children:["@",r.username]}),e.jsxs("div",{className:"followCounts",children:[r.followerCount," followers · ",r.followingCount," followings"]}),e.jsxs("div",{className:"profileInteractions",children:[e.jsx(i,{path:"/general/share.svg",alt:""}),e.jsxs("div",{className:"profileButtons",children:[e.jsx("button",{children:"Message"}),e.jsx(y,{isFollowing:r.isFollowing,username:r.username})]}),e.jsx(i,{path:"/general/more.svg",alt:""})]}),e.jsxs("div",{className:"profileOptions",children:[e.jsx("span",{onClick:()=>o("created"),className:a==="created"?"active":"",children:"Created"}),e.jsx("span",{onClick:()=>o("saved"),className:a==="saved"?"active":"",children:"Saved"})]}),a==="created"?e.jsx(h,{userId:r._id}):e.jsx(j,{userId:r._id})]}):"User not found!"};export{F as default};
